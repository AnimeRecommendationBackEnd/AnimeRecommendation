# 接口

## 状态码

| 代号 | 错误描述     |
| ---- | ------------ |
| 0    | 注册         |
| 1001 | token失效    |
| 1002 | 对象不存在   |
| 1003 | 已存在对象   |
| 1004 | 请求错误     |
| 1005 | 不能执行操作 |

- 返回示例：

  ```json
  {
      "status": 1001,
      "message": "token失效"
  }
  ```

  

## 用户部分

### 用户注册

- URL：http://127.0.0.1:5000/user/create

- 请求方式：POST

- 字段

  | 字段     | 必选  | 类型   | 说明   |
  | -------- | ----- | ------ | ------ |
  | name     | true  | string | 用户名 |
  | password | true  | string | 密码   |
  | avatar   | false | file   | 头像   |
  | email    | false | string | 邮箱   |

- 返回：

  ```json
  {
      "status": 0,
      "data": {
          "token": "asdfshufailkdsf"
      }
  }
  ```

- 注意

  - 无

### 用户登录

- URL：http://127.0.0.1:5000/user/login

- 请求方式：POST

- 字段

  | 字段     | 必选 | 类型   | 说明   |
  | -------- | ---- | ------ | ------ |
  | name     | true | string | 用户名 |
  | password | true | string | 密码   |

- 返回：

  ```json
  {
      "status": 0,
      "data": {
          "token": "asdfshufailkdsf"
      }
  }
  ```

- 注意：

  - 无

### 用户登出

- URL：http://127.0.0.1:5000/user/logout

- 请求方式：POST

- 字段

  | 字段  | 必选 | 类型   | 说明  |
  | ----- | ---- | ------ | ----- |
  | token | true | string | token |

- 返回：

  ```json
  {
      "status": 0
  }
  ```

- 注意：

  - 无

### 修改信息

- URL：http://127.0.0.1:5000/user/updata

- 请求方式：POST

- 字段

  | 字段  | 必选 | 类型   | 说明  |
  | ----- | ---- | ------ | ----- |
  | token | true | string | token |
  | name     | false | string | 用户名 |
  | password | false | string | 密码   |
  | avatar   | false | file   | 头像   |
  | email    | false | string | 邮箱   |

- 返回：

  ```json
  {
      "status": 0,
      "data": {
          "token": "affffdgsdfg"
      }
  }
  ```

- 注意：

  - 无

## 功能部分

### 荐番发表

- URL：http://127.0.0.1:5000/user/recommend

- 请求方式：POST

  - 字段

    | 字段          | 必选  | 类型    | 说明     |
    | ------------- | ----- | ------- | -------- |
    | token         | true  | string  | token    |
    | title         | true  | string  | 标题     |
    | content       | true  | string  | 文章     |
    | photo         | false | file    | 图片     |
    | animetitle    | true  | string  | 番名     |
    | animedescribe | true  | string  | 番简介   |
    | animepicture  | true  | file    | 番图片   |
    | animefrom     | false | integer | 番的来源 |
    | animelink     | false | string  | 番的网址 |
    | animeseasonid | false | string  | 番的id   |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "asdfshufailkdsf",
            "dramaid": 123
        }
    }
    ```

  - 注意

    - 番的来源为bilibili填1，否则填2
    - 来源自bilibili填animeseasonid
    - 来源自其他填animelink

---

- 请求方式：DELETE（删除推荐）

  - 字段：

    | 字段    | 必选 | 类型   | 说明   |
    | ------- | ---- | ------ | ------ |
    | token   | true | string | token  |
    | dramaid | true | string | 对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

### 荐番评论

- URL：http://127.0.0.1:5000/user/recommend/comment

- 请求方式：POST

  - 字段：
    | 字段    | 必选 | 类型   | 说明       |
    | ------- | ---- | ------ | ---------- |
    | token   | true | string | token      |
    | content | true | string | 内容       |
    | dramaid | true | string | 评论对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

---

- 请求方式：DELETE（删除评论）

  - 字段：

    | 字段    | 必选 | 类型   | 说明       |
    | ------- | ---- | ------ | ---------- |
    | token   | true | string | token      |
    | dramaid | true | string | 评论对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

### 荐番点赞

- URL：http://127.0.0.1:5000/user/recommend/star

- 请求方式：POST

  - 字段：

    | 字段    | 必选 | 类型   | 说明       |
    | ------- | ---- | ------ | ---------- |
    | token   | true | string | token      |
    | dramaid | true | string | 点赞对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

---

- 请求方式：DELETE（删除点赞）

  - 字段：

    | 字段    | 必选 | 类型   | 说明       |
    | ------- | ---- | ------ | ---------- |
    | token   | true | string | token      |
    | dramaid | true | string | 点赞对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

### 荐番收藏

- URL：http://127.0.0.1:5000/user/recommend/collect

- 请求方式：POST

  - 字段：

    | 字段    | 必选 | 类型   | 说明       |
    | ------- | ---- | ------ | ---------- |
    | token   | true | string | token      |
    | dramaid | true | string | 收藏对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

------

- 请求方式：DELETE（删除收藏）

  - 字段：

    | 字段    | 必选 | 类型   | 说明       |
    | ------- | ---- | ------ | ---------- |
    | token   | true | string | token      |
    | dramaid | true | string | 收藏对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

### 荐番获取

- URL：http://127.0.0.1/user/recommend/get

- 请求方式：GET

  - 返回：

    ```json
    {
        "status": 0,
        "data": [
            {
                "authorid": 1,
                "authorname": "咕咕",
                "title": "啦啦啦啦",
                "content": "芜湖，起飞",
                "time": "123123",
                "photos": [
                    "photo的url",
                    "photo的url"
                ],
                "animetitle": "hhh",
                "animedescribe": "啦啦啦",
                "animepicture": "picture的url",
                "animefrom": 1,
                "animelink": "bilibili具体信息的接口或其他的网址"
            },
            {
                "authorid": 1,
                "authorname": "咕咕",
                "title": "啦啦啦啦",
                "content": "芜湖，起飞",
                "time": "123123",
                "photos": [
                    "photo的url",
                    "photo的url"
                ],
                "animetitle": "hhh",
                "animedescribe": "啦啦啦",
                "animepicture": "picture的url",
                "animefrom": 1,
                "animelink": "bilibili具体信息的接口或其他的网址"
            }
        ]
    }
    ```

---

- 请求方式：POST

  - 字段：

    | 字段    | 必须 | 类型    | 说明   |
    | ------- | ---- | ------- | ------ |
    | dramaid | true | integer | 对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "authorid": 1,
            "authorname": "咕咕",
            "title": "啦啦啦啦",
            "content": "芜湖，起飞",
            "time": "123123",
            "photos": [
                "photo的url",
                "photo的url"
            ],
            "animetitle": "hhh",
            "animedescribe": "啦啦啦",
            "animepicture": "picture的url",
            "animefrom": 1,
            "animelink": "bilibili具体信息的接口或其他的网址"
            "comment": [
            	{
            		"authorname": "咕咕鸡",
            		"authorid": 1,
            		"content": "哈哈哈哈哈哈哈",
            		"time": "123123"
        		},
        		{
        			"authorname": "咕咕鸡",
            		"authorid": 1,
            		"content": "哈哈哈哈哈哈哈",
        			"time": "123123"
    			}
            ]
        }
    }
    ```
---

- 请求方式：POST

  - 字段：

    | 字段 | 必须 | 类型   | 说明 |
    | ---- | ---- | ------ | ---- |
    | ask  | true | string | 查询 |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "count": 2,
            "dramas": [
                {
                    "authorid": 1,
                    "authorname": "咕咕",
                    "title": "啦啦啦啦",
                    "content": "芜湖，起飞",
                    "time": "123123",
                    "photos": [
                        "photo的url",
                        "photo的url"
                    ],
                    "animetitle": "hhh",
                    "animedescribe": "啦啦啦",
                    "animepicture": "picture的url",
                    "animefrom": 1,
                    "animelink": "bilibili具体信息的接口或其他的网址"
                },
                {
                    "authorid": 1,
                    "authorname": "咕咕",
                    "title": "啦啦啦啦",
                    "content": "芜湖，起飞",
                    "time": "123123",
                    "photos": [
                        "photo的url",
                        "photo的url"
                    ],
                    "animetitle": "hhh",
                    "animedescribe": "啦啦啦",
                    "animepicture": "picture的url",
                    "animefrom": 1,
                    "animelink": "bilibili具体信息的接口或其他的网址"
                }
            ]
        }
    }
    ```

  - 注意：

    - 无

### 问番发表

- URL：http://127.0.0.1:5000/user/ask

  - 请求方式：POST

  - 字段：

    | 字段    | 必选  | 类型   | 说明  |
    | ------- | ----- | ------ | ----- |
    | token   | true  | string | token |
    | title   | true  | string | 标题  |
    | content | true  | string | 文章  |
    | photo   | false | file   | 图片  |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf",
            "dramaid": 123
        }
    }
    ```

---

- 请求方式：DELETE（删除推荐）

  - 字段：

    | 字段    | 必选 | 类型    | 说明   |
    | ------- | ---- | ------- | ------ |
    | token   | true | string  | token  |
    | dramaid | true | integer | 对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

### 问番评论

- URL：http://127.0.0.1:5000/user/recommend/comment

- 请求方式：POST

  - 字段：

    | 字段    | 必选 | 类型    | 说明       |
    | ------- | ---- | ------- | ---------- |
    | token   | true | string  | token      |
    | content | true | string  | 内容       |
    | dramaid | true | integer | 评论对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

------

- 请求方式：DELETE（删除评论）

  - 字段：

    | 字段    | 必选 | 类型    | 说明       |
    | ------- | ---- | ------- | ---------- |
    | token   | true | string  | token      |
    | dramaid | true | integer | 评论对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

### 问番关注

- URL：http://127.0.0.1:5000/user/recommend/star

- 请求方式：POST

  - 字段：

    | 字段    | 必选 | 类型    | 说明       |
    | ------- | ---- | ------- | ---------- |
    | token   | true | string  | token      |
    | dramaid | true | integer | 关注对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

------

- 请求方式：DELETE（删除点赞）

  - 字段：

    | 字段    | 必选 | 类型    | 说明       |
    | ------- | ---- | ------- | ---------- |
    | token   | true | string  | token      |
    | dramaid | true | integer | 关注对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "sdfsdsaasf"
        }
    }
    ```

  - 注意

    - 无

### 问番解决

- URL：http://127.0.0.1:5000/user/ask/solve

- 请求方式：POST

  - 字段：

    | 字段    | 必选 | 类型     | 说明   |
    | ------- | ---- | -------- | ------ |
    | token   | true | string   | token  |
    | dramaid | true | interger | 问番id |

  - 返回

    ```json
    {
        "status": 0,
        "data": {
            "token": "adtfdsgsfdhgdsghb"
        }
    }
    ```

---

- 请求方式：DELETE（取消解决状态）

  - 字段：

    | 字段    | 必选 | 类型     | 说明   |
    | ------- | ---- | -------- | ------ |
    | token   | true | string   | token  |
    | dramaid | true | interger | 问番id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "token": "adtfdsgsfdhgdsghb"
        }
    }
    ```

### 问番获取

- URL：http://127.0.0.1:5000/user/ask/get

- 请求方式：GET

  - 返回：

    ```json
    {
        "status": 0,
        "data": [
            {
                "authorid": 1,
                "authorname": "咕咕",
                "title": "啦啦啦啦",
                "content": "芜湖，起飞",
                "time": "123123",
                "photos": [
                    "photo的url",
                    "photo的url"
                ]
            },
            {
                "authorid": 1,
                "authorname": "咕咕",
                "title": "啦啦啦啦",
                "content": "芜湖，起飞",
                "time": "123123",
                "photos": [
                    "photo的url",
                    "photo的url"
                ]
            }
        ]
    }
    ```

------

- 请求方式：POST

  - 字段：

    | 字段    | 必须 | 类型    | 说明   |
    | ------- | ---- | ------- | ------ |
    | dramaid | true | integer | 对象id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "authorid": 1,
            "authorname": "咕咕",
            "title": "啦啦啦啦",
            "content": "芜湖，起飞",
            "time": "123123",
            "photos": [
                "photo的url",
                "photo的url"
            ]
            "comment": [
            	{
            		"authorname": "咕咕鸡",
            		"authorid": 1,
            		"content": "哈哈哈哈哈哈哈",
            		"time": "123123"
        		},
        		{
        			"authorname": "咕咕鸡",
            		"authorid": 1,
            		"content": "哈哈哈哈哈哈哈",
        			"time": "123123"
    			}
            ]
        }
    }
    ```

------

- 请求方式：POST

  - 字段：

    | 字段 | 必须 | 类型   | 说明 |
    | ---- | ---- | ------ | ---- |
    | ask  | true | string | 查询 |

  - 返回：

    ```json
    {
        "status": 0,
        "data": {
            "count": 2,
            "dramas": [
                {
                    "authorid": 1,
                    "authorname": "咕咕",
                    "title": "啦啦啦啦",
                    "content": "芜湖，起飞",
                    "time": "123123",
                    "photos": [
                        "photo的url",
                        "photo的url"
                    ]
                },
                {
                    "authorid": 1,
                    "authorname": "咕咕",
                    "title": "啦啦啦啦",
                    "content": "芜湖，起飞",
                    "time": "123123",
                    "photos": [
                        "photo的url",
                        "photo的url"
                    ]
                }
            ]
        }
    }
    ```

  - 注意：

    - 无

## 番信息部分

### 番的获取

- URL：http://127.0.0.1:5000/anime/getanime

- 请求方式：GET

  - 返回：

    ```json
    {
        "status": 0,
        "data": [
            {
                "title": "甲铁城的卡巴内瑞",
                "picture": "http://i0.hdslb.com/bfs/bangumi/6603936f61460f284c153b5fbdf2a8f6b2acb34c.jpg",
                "cescribe": "倒A官方推特公布由荒木哲郎、大河内一楼、WIT联手的原创动画「甲铁城的卡巴内瑞」使动这部动画将由原创动画「罪恶王冠」的原班人马---监督荒木哲郎，脚本大河内一楼，动画制作WIT再度联手打造。在过去的一次访谈中，荒木哲郎监督曾经表示「罪恶王冠」的失败让他深感反思，并且希望能再次打造一个令他满意的原创动画。不知这次罪恶王冠的人马再集结，荒木监督的夙愿能不能如愿以偿？",
                "seasonId": "3494",
                "sediaId":  "3494",
                "link":  "https://api.bilibili.com/pgc/web/season/stat?season_id=3494",
                "isFinish": 1,
                "tag": "10010"
            },
            {
                "title": "甲铁城的卡巴内瑞",
                "picture": "http://i0.hdslb.com/bfs/bangumi/6603936f61460f284c153b5fbdf2a8f6b2acb34c.jpg",
                "describe" "倒A官方推特公布由荒木哲郎、大河内一楼、WIT联手的原创动画「甲铁城的卡巴内瑞」使动这部动画将由原创动画「罪恶王冠」的原班人马---监督荒木哲郎，脚本大河内一楼，动画制作WIT再度联手打造。在过去的一次访谈中，荒木哲郎监督曾经表示「罪恶王冠」的失败让他深感反思，并且希望能再次打造一个令他满意的原创动画。不知这次罪恶王冠的人马再集结，荒木监督的夙愿能不能如愿以偿？",
                "seasonId": "3494",
                "sediaId": "3494",
                "link":  "https://api.bilibili.com/pgc/web/season/stat?season_id=3494",
                "isFinish": 1,
                "tag": "10010"
            }
        ]
    }
    ```

---

- 请求方式：POST

  - 字段：

  | 字段  | 必选 | 类型   | 说明   |
  | ----- | ---- | ------ | ------ |
  | tagid | true | string | 类型id |

  - 返回：

    ```json
    {
        "status": 0,
        "data": [
            {
                "title": "甲铁城的卡巴内瑞",
                "picture": "http://i0.hdslb.com/bfs/bangumi/6603936f61460f284c153b5fbdf2a8f6b2acb34c.jpg",
                "cescribe": "倒A官方推特公布由荒木哲郎、大河内一楼、WIT联手的原创动画「甲铁城的卡巴内瑞」使动这部动画将由原创动画「罪恶王冠」的原班人马---监督荒木哲郎，脚本大河内一楼，动画制作WIT再度联手打造。在过去的一次访谈中，荒木哲郎监督曾经表示「罪恶王冠」的失败让他深感反思，并且希望能再次打造一个令他满意的原创动画。不知这次罪恶王冠的人马再集结，荒木监督的夙愿能不能如愿以偿？",
                "seasonId": "3494",
                "sediaId":  "3494",
                "link":  "https://api.bilibili.com/pgc/web/season/stat?season_id=3494",
                "isFinish": 1,
                "tag": "10010"
            },
            {
                "title": "甲铁城的卡巴内瑞",
                "picture": "http://i0.hdslb.com/bfs/bangumi/6603936f61460f284c153b5fbdf2a8f6b2acb34c.jpg",
                "describe" "倒A官方推特公布由荒木哲郎、大河内一楼、WIT联手的原创动画「甲铁城的卡巴内瑞」使动这部动画将由原创动画「罪恶王冠」的原班人马---监督荒木哲郎，脚本大河内一楼，动画制作WIT再度联手打造。在过去的一次访谈中，荒木哲郎监督曾经表示「罪恶王冠」的失败让他深感反思，并且希望能再次打造一个令他满意的原创动画。不知这次罪恶王冠的人马再集结，荒木监督的夙愿能不能如愿以偿？",
                "seasonId": "3494",
                "sediaId": "3494",
                "link":  "https://api.bilibili.com/pgc/web/season/stat?season_id=3494",
                "isFinish": 1,
                "tag": "10010"
            }
        ]
    }
    ```